<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCP Script Builder</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-code"></i> GCP Script Builder</h1>
                <p>Build robust JavaScript scripts for automotive dealership websites</p>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Panel - Configuration -->
            <div class="left-panel">
                <div class="panel-section">
                    <h2><i class="fas fa-crosshairs"></i> Target Selector</h2>
                    <div class="selector-config">
                        <!-- Selector Type -->
                        <div class="form-group">
                            <label for="selectorType">Selector Type:</label>
                            <select id="selectorType" class="form-control">
                                <option value="css">CSS Selector</option>
                                <option value="xpath">XPath</option>
                                <option value="advanced">Advanced Builder</option>
                            </select>
                        </div>

                        <!-- Basic CSS Selector -->
                        <div id="basicSelector" class="form-group">
                            <label for="cssSelector">CSS Selector:</label>
                            <input type="text" id="cssSelector" class="form-control" placeholder=".my-class, #my-id, button[data-attr]">
                            <small class="help-text">Examples: .class-name, #element-id, [data-attribute="value"]</small>
                        </div>

                        <!-- Advanced Selector Builder -->
                        <div id="advancedSelector" class="advanced-builder" style="display: none;">
                            <div class="builder-header">
                                <h3>Advanced Selector Builder</h3>
                                <button type="button" class="btn btn-small" id="addCondition">
                                    <i class="fas fa-plus"></i> Add Condition
                                </button>
                            </div>
                            <div id="conditionsList" class="conditions-list">
                                <!-- Dynamic conditions will be added here -->
                            </div>
                        </div>

                        <!-- Fallback Selectors -->
                        <div class="form-group">
                            <label for="fallbackSelectors">Fallback Selectors (optional):</label>
                            <textarea id="fallbackSelectors" class="form-control" rows="3" 
                                placeholder="Enter fallback selectors, one per line&#10;.alternative-class&#10;#backup-id&#10;[data-fallback]"></textarea>
                            <small class="help-text">Provide backup selectors in case the primary one fails</small>
                        </div>
                    </div>
                </div>

                <!-- Script Features -->
                <div class="panel-section">
                    <h2><i class="fas fa-cogs"></i> Script Features</h2>
                    <div class="features-grid">
                        <!-- Core Features -->
                        <div class="feature-category">
                            <h3>Core Features</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="spaFriendly" checked>
                                    <span class="checkmark"></span>
                                    SPA Friendly
                                    <i class="fas fa-info-circle" data-tooltip="Handles Single Page Application navigation and URL changes"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="domReady" checked>
                                    <span class="checkmark"></span>
                                    DOM Ready Handling
                                    <i class="fas fa-info-circle" data-tooltip="Waits for DOM to be fully loaded before executing"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="errorHandling" checked>
                                    <span class="checkmark"></span>
                                    Error Handling
                                    <i class="fas fa-info-circle" data-tooltip="Comprehensive try-catch blocks and graceful error recovery"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="preventDuplicates" checked>
                                    <span class="checkmark"></span>
                                    Prevent Duplicates
                                    <i class="fas fa-info-circle" data-tooltip="Prevents multiple script executions on the same page"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Performance Features -->
                        <div class="feature-category">
                            <h3>Performance</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="debouncing">
                                    <span class="checkmark"></span>
                                    Debouncing
                                    <i class="fas fa-info-circle" data-tooltip="Prevents excessive function calls with timing controls"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="caching">
                                    <span class="checkmark"></span>
                                    Element Caching
                                    <i class="fas fa-info-circle" data-tooltip="Caches DOM queries to improve performance"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="cleanup">
                                    <span class="checkmark"></span>
                                    Resource Cleanup
                                    <i class="fas fa-info-circle" data-tooltip="Cleans up event listeners and prevents memory leaks"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Monitoring Features -->
                        <div class="feature-category">
                            <h3>Monitoring</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="mutationObserver">
                                    <span class="checkmark"></span>
                                    DOM Mutation Observer
                                    <i class="fas fa-info-circle" data-tooltip="Monitors DOM changes for dynamic content"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="intervalMonitoring">
                                    <span class="checkmark"></span>
                                    Interval Monitoring
                                    <i class="fas fa-info-circle" data-tooltip="Periodic checks for elements and conditions"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="urlMonitoring">
                                    <span class="checkmark"></span>
                                    URL Change Monitoring
                                    <i class="fas fa-info-circle" data-tooltip="Detects navigation changes in SPAs"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Development Features -->
                        <div class="feature-category">
                            <h3>Development</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="debugging">
                                    <span class="checkmark"></span>
                                    Debug Mode
                                    <i class="fas fa-info-circle" data-tooltip="Comprehensive logging and monitoring for development"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="consoleLogging">
                                    <span class="checkmark"></span>
                                    Console Logging
                                    <i class="fas fa-info-circle" data-tooltip="Detailed console output for troubleshooting"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="elementHighlighting">
                                    <span class="checkmark"></span>
                                    Element Highlighting
                                    <i class="fas fa-info-circle" data-tooltip="Visually highlight targeted elements for debugging"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Widget Integration -->
                        <div class="feature-category">
                            <h3>Widget Integration</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="widgetLoader">
                                    <span class="checkmark"></span>
                                    Widget Loader
                                    <i class="fas fa-info-circle" data-tooltip="Load external widgets (AccuTrade, Elfsight, etc.)"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="asyncLoading">
                                    <span class="checkmark"></span>
                                    Async Loading
                                    <i class="fas fa-info-circle" data-tooltip="Handle asynchronous content loading"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="fallbackMechanisms">
                                    <span class="checkmark"></span>
                                    Fallback Mechanisms
                                    <i class="fas fa-info-circle" data-tooltip="Provide fallbacks when external services fail"></i>
                                </label>
                            </div>
                        </div>

                        <!-- Page Type Detection -->
                        <div class="feature-category">
                            <h3>Page Detection</h3>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="vdpDetection">
                                    <span class="checkmark"></span>
                                    VDP Detection
                                    <i class="fas fa-info-circle" data-tooltip="Detect Vehicle Detail Pages for automotive sites"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="srpDetection">
                                    <span class="checkmark"></span>
                                    SRP Detection
                                    <i class="fas fa-info-circle" data-tooltip="Detect Search Results Pages"></i>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="customPageDetection">
                                    <span class="checkmark"></span>
                                    Custom Page Detection
                                    <i class="fas fa-info-circle" data-tooltip="Custom URL pattern matching for specific pages"></i>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Script Actions -->
                <div class="panel-section">
                    <h2><i class="fas fa-magic"></i> Script Actions</h2>
                    <div class="action-type-selector">
                        <label for="actionType">Action Type:</label>
                        <select id="actionType" class="form-control">
                            <option value="">Select an action...</option>
                            <option value="modify">Modify Element</option>
                            <option value="add">Add Element</option>
                            <option value="remove">Remove Element</option>
                            <option value="style">Style Changes</option>
                            <option value="event">Add Event Listeners</option>
                            <option value="widget">Insert Widget</option>
                            <option value="form">Form Handling</option>
                            <option value="custom">Custom JavaScript</option>
                        </select>
                    </div>
                    
                    <div id="actionConfig" class="action-config" style="display: none;">
                        <!-- Dynamic action configuration will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview and Output -->
            <div class="right-panel">
                <div class="panel-section">
                    <div class="preview-header">
                        <h2><i class="fas fa-eye"></i> Script Preview</h2>
                        <div class="preview-controls">
                            <button type="button" class="btn btn-primary" id="generateScript">
                                <i class="fas fa-code"></i> Generate Script
                            </button>
                            <button type="button" class="btn btn-secondary" id="copyScript">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button type="button" class="btn btn-secondary" id="downloadScript">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                    
                    <div class="script-output">
                        <div class="output-tabs">
                            <button class="tab-button active" data-tab="generated">Generated Script</button>
                            <button class="tab-button" data-tab="minified">Minified</button>
                            <button class="tab-button" data-tab="documentation">Documentation</button>
                        </div>
                        
                        <div class="tab-content">
                            <div id="generatedTab" class="tab-pane active">
                                <pre><code id="scriptOutput" class="language-javascript">// Your generated script will appear here
// Configure your settings and click "Generate Script"</code></pre>
                            </div>
                            <div id="minifiedTab" class="tab-pane">
                                <pre><code id="minifiedOutput" class="language-javascript">// Minified version will appear here</code></pre>
                            </div>
                            <div id="documentationTab" class="tab-pane">
                                <div id="docOutput" class="documentation-content">
                                    <p>Documentation will be generated based on your script configuration.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Script Testing -->
                <div class="panel-section">
                    <h2><i class="fas fa-vial"></i> Testing Tools</h2>
                    <div class="testing-tools">
                        <div class="test-selector">
                            <label for="testUrl">Test URL (optional):</label>
                            <input type="url" id="testUrl" class="form-control" placeholder="https://example.com">
                            <small class="help-text">URL to test selector against (for validation)</small>
                        </div>
                        <div class="test-actions">
                            <button type="button" class="btn btn-outline" id="validateSelector">
                                <i class="fas fa-check-circle"></i> Validate Selector
                            </button>
                            <button type="button" class="btn btn-outline" id="testScript">
                                <i class="fas fa-play"></i> Test Script
                            </button>
                        </div>
                        <div id="testResults" class="test-results" style="display: none;">
                            <!-- Test results will appear here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tooltips -->
    <div id="tooltip" class="tooltip" style="display: none;"></div>

    <!-- Scripts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-dark.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-javascript.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
